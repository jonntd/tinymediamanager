# tinyMediaManager æ„å»ºé…ç½®æ–‡ä»¶
# ç”¨äºç»Ÿä¸€ç®¡ç†æ„å»ºå‚æ•°å’Œå¹³å°é…ç½®

# åŸºç¡€é…ç½®
base:
  java_version: "17"
  maven_opts: "-Xmx2048m -Xms1024m"
  artifact_retention_days: 30
  nightly_retention_days: 7

# å¹³å°é…ç½®
platforms:
  windows-x64:
    os: "windows-latest"
    assembly: "windows-x64"
    native_path: "native/windows"
    output_format: "zip"
    executable_suffix: ".exe"
    jre_platform: "windows_x64"
    
  linux-x64:
    os: "ubuntu-latest"
    assembly: "linux-x64"
    native_path: "native/linux"
    output_format: "tar.bz2"
    executable_suffix: ""
    jre_platform: "linux_x64"
    
  linux-aarch64:
    os: "ubuntu-latest"
    assembly: "linux-aarch64"
    native_path: "native/arm"
    output_format: "tar.bz2"
    executable_suffix: ""
    jre_platform: "linux_aarch64"
    
  macos-x64:
    os: "macos-13"
    assembly: "macos-x64"
    native_path: "native/mac"
    output_format: "tar.bz2"
    executable_suffix: ""
    jre_platform: "macos_x64"
    
  macos-aarch64:
    os: "macos-latest"
    assembly: "macos-aarch64"
    native_path: "native/mac"
    output_format: "tar.bz2"
    executable_suffix: ""
    jre_platform: "macos_aarch64"

# æ„å»ºç±»å‹é…ç½®
build_types:
  test:
    description: "æµ‹è¯•æ„å»º - ä»…ç¼–è¯‘å’ŒåŸºç¡€æµ‹è¯•"
    maven_goals: "clean compile test"
    skip_tests: false
    skip_sign: true
    create_dist: false
    
  package:
    description: "æ‰“åŒ…æ„å»º - åˆ›å»º JAR åŒ…"
    maven_goals: "clean package"
    skip_tests: true
    skip_sign: true
    create_dist: false
    
  dist:
    description: "åˆ†å‘æ„å»º - åˆ›å»ºå®Œæ•´åˆ†å‘åŒ…"
    maven_goals: "clean package -Pdist"
    skip_tests: true
    skip_sign: true
    create_dist: true
    
  release:
    description: "å‘å¸ƒæ„å»º - åŒ…å«ç­¾åçš„å®Œæ•´æ„å»º"
    maven_goals: "clean package -Pdist"
    skip_tests: false
    skip_sign: false
    create_dist: true

# è§¦å‘æ¡ä»¶é…ç½®
triggers:
  push_branches:
    - "devel"
    - "main"
    - "release/*"
    
  tag_pattern: "v*"
  
  pr_branches:
    - "devel"
    - "main"

# ç¼“å­˜é…ç½®
cache:
  maven:
    paths:
      - "~/.m2/repository"
    key_prefix: "maven"
    restore_keys:
      - "maven-"
      
  gradle:
    paths:
      - "~/.gradle/caches"
      - "~/.gradle/wrapper"
    key_prefix: "gradle"
    restore_keys:
      - "gradle-"

# é€šçŸ¥é…ç½®
notifications:
  success:
    enabled: true
    message: "âœ… æ„å»ºæˆåŠŸå®Œæˆ"
    
  failure:
    enabled: true
    message: "âŒ æ„å»ºå¤±è´¥"
    
  nightly:
    enabled: true
    message: "ğŸŒ™ å¤œé—´æ„å»ºå®Œæˆ"

# æ€§èƒ½é…ç½®
performance:
  parallel_jobs: 5
  timeout_minutes: 60
  memory_limit: "4g"
  
  test_timeout: 30
  build_timeout: 45
  dist_timeout: 60

# å®‰å…¨é…ç½® (ç®€åŒ–ç‰ˆ)
security:
  sign_artifacts: false  # æ¡Œé¢åº”ç”¨ä¸éœ€è¦ç­¾å
  basic_checks_only: true

# å‘å¸ƒé…ç½®
release:
  draft: false
  prerelease_patterns:
    - "*-alpha*"
    - "*-beta*"
    - "*-rc*"
    
  asset_patterns:
    - "dist/*.zip"
    - "dist/*.tar.bz2"
    - "dist/*.sha256"
    - "target/*.jar"
    
  changelog:
    enabled: true
    sections:
      - title: "ğŸš€ æ–°åŠŸèƒ½"
        labels: ["enhancement", "feature"]
      - title: "ğŸ› Bug ä¿®å¤"
        labels: ["bug", "fix"]
      - title: "ğŸ“š æ–‡æ¡£"
        labels: ["documentation"]
      - title: "ğŸ”§ å…¶ä»–æ”¹è¿›"
        labels: ["improvement", "refactor"]

# è´¨é‡æ£€æŸ¥é…ç½® (ç®€åŒ–ç‰ˆ)
quality:
  basic_checks:
    enabled: true
    compile_warnings: true
    test_coverage: false

# ç¯å¢ƒå˜é‡é…ç½®
environment:
  global:
    MAVEN_OPTS: "-Xmx2048m -Xms1024m -XX:+UseG1GC"
    JAVA_TOOL_OPTIONS: "-Dfile.encoding=UTF-8"
    
  development:
    TMM_ENV: "development"
    LOG_LEVEL: "DEBUG"
    
  production:
    TMM_ENV: "production"
    LOG_LEVEL: "INFO"

# å·¥ä»¶é…ç½®
artifacts:
  jar:
    name_pattern: "tinymediamanager-{version}.jar"
    path: "target/*.jar"
    
  dist:
    name_pattern: "tinymediamanager-{version}-{platform}.{format}"
    path: "dist/*"
    
  checksums:
    algorithms: ["sha256", "md5"]
    
  metadata:
    include_build_info: true
    include_git_info: true
    include_system_info: true
